!function(){"use strict";CKEDITOR.tools.debounce=CKEDITOR.tools.debounce||function(t,e,o,i){var n,r;return n=function(){var n,s,a,l=[],u=0;for(s=o||this,a=arguments.length;a>u;++u)l.push(arguments[u]);n=l.concat(i||[]),clearTimeout(r),r=setTimeout(function(){t.apply(s,n)},e)},n.detach=function(){clearTimeout(r)},n}}(),function(){"use strict";function t(t){this._editor=t}t.prototype={constructor:t,create:function(t,e){var o,i,n,r,s;n=this._editor.getSelection(),i=n.getRanges()[0],i.collapsed&&(s=new CKEDITOR.dom.text(t,this._editor.document),i.insertNode(s),i.selectNodeContents(s)),o=CKEDITOR.tools.merge({"data-cke-saved-href":t,href:t},e),r=new CKEDITOR.style({attributes:o,element:"a"}),r.type=CKEDITOR.STYLE_INLINE,r.applyToRange(i,this._editor),i.select()},getFromSelection:function(){var t,e,o;return e=this._editor.getSelection(),o=e.getSelectedElement(),o&&o.is("a")?o:(t=e.getRanges()[0],t?(t.shrink(CKEDITOR.SHRINK_TEXT),this._editor.elementPath(t.getCommonAncestor()).contains("a",1)):null)},remove:function(t){var e;t?t.remove(this._editor):(e=t||new CKEDITOR.style({alwaysRemoveElement:1,element:"a",type:CKEDITOR.STYLE_INLINE}),this._editor.removeStyle(e))},update:function(t,e){var o;o=e||this.getFromSelection(),o.setAttributes({"data-cke-saved-href":t,href:t})}},CKEDITOR.Link=CKEDITOR.Link||t}(),function(){"use strict";function t(){}CKEDITOR.plugins.get("selectionregion")||(CKEDITOR.SELECTION_TOP_TO_BOTTOM=0,CKEDITOR.SELECTION_BOTTOM_TO_TOP=1,CKEDITOR.SELECTION_LEFT_TO_RIGHT=2,CKEDITOR.SELECTION_RIGHT_TO_LEFT=3,t.prototype={constructor:t,createSelectionFromPoint:function(t,e){this.createSelectionFromRange(t,e,t,e)},createSelectionFromRange:function(t,e,o,i){var n,r,s,a,l,u,c,d,g,b;n=this.editor,"function"==typeof document.caretPositionFromPoint?(d=document.caretPositionFromPoint(t,e),r=document.caretPositionFromPoint(o,i),g=d.offsetNode,s=r.offsetNode,b=d.offset,a=r.offset,u=this.createRange()):"function"==typeof document.caretRangeFromPoint&&(d=document.caretRangeFromPoint(t,e),r=document.caretRangeFromPoint(o,i),g=d.startContainer,s=r.startContainer,b=d.startOffset,a=r.startOffset,u=this.createRange()),u&&document.getSelection?(u.setStart(new CKEDITOR.dom.node(g),b),u.setEnd(new CKEDITOR.dom.node(s),a),this.getSelection().selectRanges([u])):"function"==typeof document.body.createTextRange&&(c=this.getSelection(),c.unlock(),u=document.body.createTextRange(),u.moveToPoint(t,e),l=u.duplicate(),l.moveToPoint(o,i),u.setEndPoint("EndToEnd",l),u.select(),this.getSelection().lock())},getCaretRegion:function(){var t,e,o,i,n;return i=this.getSelection(),e=i.createBookmarks(),t=e[0].startNode.$,t.style.display="inline-block",o=new CKEDITOR.dom.element(t).getClientRect(),t.parentNode.removeChild(t),n=new CKEDITOR.dom.window(window).getScrollPosition(),{bottom:n.y+o.bottom,left:n.x+o.left,right:n.x+o.right,top:n.y+o.top}},getSelectionData:function(){var t,e;return e=this.getSelection(),t={element:e.getSelectedElement(),text:e.getSelectedText()},t.region=this.getSelectionRegion(e),t},getSelectionRegion:function(){var t,e;return t=CKEDITOR.SELECTION_TOP_TO_BOTTOM,e=this.getClientRectsRegion(),e.direction=this._getSelectionDirection(),e.height=e.bottom-e.top,e.width=e.right-e.left,e},isSelectionEmpty:function(){var t,e=this.getSelection();return e.getType()===CKEDITOR.SELECTION_NONE||(t=e.getRanges())&&1===t.length&&t[0].collapsed},getClientRectsRegion:function(){var t,e,o,i,n,r,s,a,l,u,c,d,g,b,h,p;if(g=this.getSelection(),a=g.getNative(),a.createRange?(l=a.createRange(),e=l.getClientRects()):(u=a.rangeCount,e=a.rangeCount>0?a.getRangeAt(0).getClientRects():[]),t=0,r=1/0,d=-1/0,p=1/0,0===e.length)c=this.getCaretRegion();else{for(i=0,s=e.length;s>i;i++)n=e[i],n.left<r&&(r=n.left),n.right>d&&(d=n.right),n.top<p&&(p=n.top),n.bottom>t&&(t=n.bottom);b=new CKEDITOR.dom.window(window).getScrollPosition(),c={bottom:b.y+t,left:b.x+r,right:b.x+d,top:b.y+p},e.length&&(o=e[e.length-1],h=e[0],c.endRect={bottom:b.y+o.bottom,height:o.height,left:b.x+o.left,right:b.x+o.right,top:b.y+o.top,width:o.width},c.startRect={bottom:b.y+h.bottom,height:h.height,left:b.x+h.left,right:b.x+h.right,top:b.y+h.top,width:h.width})}return c},_getSelectionDirection:function(){var t,e,o,i,n;return n=this.getSelection(),o=n.getNative(),e=CKEDITOR.SELECTION_TOP_TO_BOTTOM,(t=o.anchorNode)&&t.compareDocumentPosition&&(i=t.compareDocumentPosition(o.focusNode),(!i&&o.anchorOffset>o.focusOffset||i===Node.DOCUMENT_POSITION_PRECEDING)&&(e=CKEDITOR.SELECTION_BOTTOM_TO_TOP)),e}},CKEDITOR.plugins.add("selectionregion",{init:function(e){var o,i;i=Object.prototype.hasOwnProperty;for(o in t.prototype)i.call(t.prototype,o)&&"undefined"==typeof e[o]&&(e[o]=t.prototype[o])}}))}(),function(){"use strict";CKEDITOR.tools.merge=CKEDITOR.tools.merge||function(){for(var t,e,o=0,i=arguments.length,n={};i>o;++o){e=arguments[o];for(t in e)hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}}(),function(){"use strict";CKEDITOR.plugins.get("uicore")||CKEDITOR.plugins.add("uicore",{init:function(t){var e,o,i,n,r=[];e=this._createAriaElement(t.id),n=t.config.uicore?t.config.uicore.timeout:50,o=CKEDITOR.tools.debounce(function(){e.innerHTML=r.join(". ")},n),i=CKEDITOR.tools.debounce(function(e){r=[],("keyup"!==e.name||27!==e.data.$.keyCode||t.config.allowEsc)&&t.fire("editorInteraction",{nativeEvent:e.data.$,selectionData:t.getSelectionData()})},n),t.on("ariaUpdate",function(t){r.push(t.data.message),o()}),t.on("contentDom",function(){var e=t.editable();e.attachListener(e,"mouseup",i),e.attachListener(e,"keyup",i)})},_createAriaElement:function(t){var e;return e=document.createElement("div"),e.className="sr-only",e.setAttribute("aria-live","polite"),e.setAttribute("role","status"),e.setAttribute("id",t+"LiveRegion"),document.body.appendChild(e),e}})}(),CKEDITOR.disableAutoInline=!0,YUI.add("alloy-editor",function(t){"use strict";var e,o=t.Lang,i=27,n=121,r=9;e=t.Base.create("alloyEditor",t.Base,[],{initializer:function(e){var o,i,n,r,s,a,l;s=this.get("srcNode"),i=CKEDITOR.inline(s.getDOMNode()),i.config.allowedContent=this.get("allowedContent"),i.config.toolbars=this.get("toolbars"),i.config.removePlugins=this.get("removePlugins"),i.config.extraPlugins=this.get("extraPlugins"),i.config.placeholderClass=this.get("placeholderClass"),i.config.pasteFromWordRemoveStyles=!1,i.config.pasteFromWordRemoveFontStyles=!1,t.mix(i.config,e),this._editor=i,r=this.get("eventsDelay"),a=CKEDITOR.tools.debounce(this._onDocInteract,r,this),l=CKEDITOR.tools.debounce(this._onEditorKey,r,this),n=t.one(t.config.doc).on(["click","keydown"],a),o=s.on("keydown",l),this._eventHandles=[a,l,n,o],i.on("toolbarKey",this._onToolbarKey,this),i.on("toolbarActive",this._onToolbarActive,this)},destructor:function(){var e;e=CKEDITOR.instances[this.get("srcNode").get("id")],e&&(t.Object.each(e.config.toolbars,function(t){t.destroy()}),e.destroy()),new t.EventHandle(this._eventHandles).detach()},_focusNextToolbar:function(){var e,o,i,n;e=this._activeToolbar,n=this._editor.config.toolbars,n=t.Object.keys(n).map(function(t){return n[t]}),o=t.Array.indexOf(n,e),i=n.splice(o),n=i.concat(n),t.Array.some(n,function(t){return t!==e&&t.focus()?(this._activeToolbar=t,!0):void 0},this)},_focusVisibleToolbar:function(){t.Object.some(this._editor.config.toolbars,function(t){return t!=this._activeToolbar&&t.focus()?(this._activeToolbar=t,t.get("visible")):void 0},this)},_getNativeEditor:function(){return this._editor},_hideToolbars:function(){t.Object.each(this._editor.config.toolbars,function(t){t.hide()})},_onDocInteract:function(e){var o,i,n;n=this.get("srcNode"),i=n===e.target||n.contains(e.target),o=CKEDITOR.instances[n.get("id")],i=i||t.some(o.config.toolbars,function(t){return t.ownsNode(e.target)}),i||this._editor.fire("toolbarsHide")},_onEditorKey:function(t){t.altKey&&t.keyCode===n?this._focusVisibleToolbar():t.keyCode===i&&this._hideToolbars()},_onToolbarActive:function(t){this._activeToolbar=t.data},_onToolbarKey:function(t){t.data.keyCode===r?(t.data.preventDefault(),this._focusNextToolbar()):t.data.keyCode===i&&(this._activeToolbar.blur(),this._activeToolbar=null,this._hideToolbars())},_validateAllowedContent:function(t){return o.isString(t)||o.isObject(t)||o.isBoolean(t)},_validateToolbars:function(t){return""===t||o.isObject(t)||o.isNull(t)}},{ATTRS:{allowedContent:{validator:"_validateAllowedContent",value:!0,writeOnce:!0},eventsDelay:{validator:o.isNumber,value:100},extraPlugins:{validator:o.isString,value:"uicore,selectionregion,dropimages,placeholder,linktooltip,uiloader",writeOnce:!0},nativeEditor:{getter:"_getNativeEditor",readOnly:!0},placeholderClass:{validator:o.isString,value:"alloy-editor-placeholder",writeOnce:!0},removePlugins:{validator:o.isString,value:"contextmenu,toolbar,elementspath,resize,liststyle,tabletools,link",writeOnce:!0},srcNode:{setter:t.one,writeOnce:!0},toolbars:{validator:"_validateToolbars",value:{add:["image"],image:["left","right"],styles:["strong","em","u","h1","h2","a","twitter"]}}}}),t.AlloyEditor=e},"",{requires:["base-build","node-base"]}),function(){"use strict";var t=CKEDITOR.env.ie;CKEDITOR.plugins.get("dropimages")||CKEDITOR.plugins.add("dropimages",{init:function(t){var e;e=t.editable(t.element.$),e.attachListener(e,"dragenter",this._onDragEnter,this,{editor:t}),e.attachListener(e,"dragover",this._onDragOver,this,{editor:t}),e.attachListener(e,"drop",this._onDragDrop,this,{editor:t})},_handleFiles:function(t,e){var o,i,n;for(o=0;o<t.length;o++)n=t[o],i=/image.*/,n.type.match(i)&&this._processFile(n,e);return!1},_onDragEnter:function(e){t&&this._preventEvent(e)},_onDragOver:function(e){t&&this._preventEvent(e)},_onDragDrop:function(t){var e,o;o=t.data.$,new CKEDITOR.dom.event(o).preventDefault(),e=t.listenerData.editor,t.listenerData.editor.createSelectionFromPoint(o.clientX,o.clientY),this._handleFiles(o.dataTransfer.files,e)},_preventEvent:function(t){t=new CKEDITOR.dom.event(t.data.$),t.preventDefault(),t.stopPropagation()},_processFile:function(t,e){var o=new FileReader;o.addEventListener("loadend",function(){var i,n,r;i=o.result,n=CKEDITOR.dom.element.createFromHtml('<img src="'+i+'">'),e.insertElement(n),r={el:n,file:t},e.fire("imagedrop",r)}),o.readAsDataURL(t)}})}(),function(){"use strict";CKEDITOR.plugins.get("placeholder")||CKEDITOR.plugins.add("placeholder",{init:function(t){t.on("blur",this._onBlur,this)},_onBlur:function(t){var e,o;e=t.editor,""===e.getData()&&(o=new CKEDITOR.dom.element(e.element.$),o.setHtml(""),o.addClass(e.config.placeholderClass))}})}(),function(){"use strict";function t(){YUI.applyConfig({groups:{AlloyEditor:{base:"alloy-editor/",combine:!1,comboBase:"",modules:o,root:"/alloy-editor/"}}})}function e(){YUI.applyConfig({modules:o})}var o={"alloy-editor":{path:"adapter/yui.js",requires:["base-build","node-base"]},"button-base":{group:"AlloyEditor",path:"buttons/button-base.js",requires:["base-build","plugin","button"]},"button-strong":{group:"AlloyEditor",path:"buttons/button-strong.js",requires:["button-base"]},"button-em":{group:"AlloyEditor",path:"buttons/button-em.js",requires:["button-base"]},"button-strike":{group:"AlloyEditor",path:"buttons/button-strike.js",requires:["button-base"]},"button-subscript":{group:"AlloyEditor",path:"buttons/button-subscript.js",requires:["button-base"]},"button-superscript":{group:"AlloyEditor",path:"buttons/button-superscript.js",requires:["button-base"]},"button-ol":{group:"AlloyEditor",path:"buttons/button-ol.js",requires:["button-base"]},"button-ul":{group:"AlloyEditor",path:"buttons/button-ul.js",requires:["button-base"]},"button-a":{group:"AlloyEditor",path:"buttons/button-a.js",requires:["button-base","event-valuechange","node-focusmanager"]},"button-h1":{group:"AlloyEditor",path:"buttons/button-h1.js",requires:["button-base"]},"button-h2":{group:"AlloyEditor",path:"buttons/button-h2.js",requires:["button-base"]},"button-u":{group:"AlloyEditor",path:"buttons/button-underline.js",requires:["button-base"]},"button-twitterquote":{group:"AlloyEditor",path:"buttons/button-twitterquote.js",requires:["button-base"]},"button-hline":{group:"AlloyEditor",path:"buttons/button-hline.js",requires:["button-base"]},"button-image":{group:"AlloyEditor",path:"buttons/button-image.js",requires:["button-base","node-event-simulate"]},"button-media":{group:"AlloyEditor",path:"buttons/button-media.js",requires:["button-base"]},"button-quote":{group:"AlloyEditor",path:"buttons/button-quote.js",requires:["button-base"]},"button-code":{group:"AlloyEditor",path:"buttons/button-code.js",requires:["button-base"]},"button-twitter":{group:"AlloyEditor",path:"buttons/button-twitter.js",requires:["button-base"]},"button-left":{group:"AlloyEditor",path:"buttons/button-left.js",requires:["button-base"]},"button-right":{group:"AlloyEditor",path:"buttons/button-right.js",requires:["button-base"]},"toolbar-base":{group:"AlloyEditor",path:"toolbars/toolbar-base.js",requires:["plugin","node-base","transition"]},"toolbar-position":{group:"AlloyEditor",path:"toolbars/toolbar-position.js",requires:["node-base"]},"toolbar-add":{group:"AlloyEditor",path:"toolbars/toolbar-add.js",requires:["widget-base","widget-position","widget-position-constrain","widget-position-align","toolbar-base"]},"toolbar-styles":{group:"AlloyEditor",path:"toolbars/toolbar-styles.js",requires:["toolbar-base","widget-base","widget-position","widget-position-constrain"]},"toolbar-image":{group:"AlloyEditor",path:"toolbars/toolbar-image.js",requires:["dom-screen","widget-base","widget-position","widget-position-constrain","toolbar-base"]},"selector-patch":{condition:{trigger:"selector-native"},group:"AlloyEditor",path:"plugins/selector-patch.js"}};if(YUI&&YUI.GlobalConfig){var i=YUI.GlobalConfig.groups;i&&i.AlloyEditor?e():t()}else t()}(),function(){"use strict";CKEDITOR.plugins.get("linktooltip")||(YUI.add("linktooltip",function(t){var e=t.Lang,o=t.Base.create("linktooltip",t.Widget,[t.WidgetPosition,t.WidgetPositionConstrain,t.WidgetAutohide],{initializer:function(){this._eventHandles=[]},destructor:function(){new t.EventHandle(this._eventHandles).detach()},renderUI:function(){var e;e=t.Node.create(this.TPL_CONTENT),this.get("contentBox").appendChild(e),this._linkPreview=e.one(".link-preview")},bindUI:function(){var e;this._bindBBMouseEnter(),e=this.get("editor"),this._eventHandles.push(t.one(e.element.$).delegate("mouseenter",this._onLinkMouseEnter,"a[href]:not([data-cke-default-link])",this,e)),this.get("boundingBox").on("clickoutside",this._onClickOutside,this)},_bindBBMouseLeave:function(){var t;t=this.get("boundingBox"),this._bbMouseLeaveHandle=t.once("mouseleave",this._onBBMouseLeave,this)},_bindBBMouseEnter:function(){var t;t=this.get("boundingBox"),this._bbMouseEnterHandle=t.on("mouseenter",this._onBBMouseEnter,this)},_attachHiddenHandle:function(){var t=this;this._hideHandle=setTimeout(function(){t.hide()},this.get("hideTimeout"))},_getXY:function(t,o,i){var n,r,s,a,l,u;if(a=parseInt(i.getComputedStyle("lineHeight"),10),n=this.get("gutter"),u=i.get("region"),n=n.top,e.isNumber(a)){for(s=1,l=Math.ceil((u.bottom-u.top)/a),r=1;l>=r&&!(o<u.top+a*r);r++)++s;o=u.top+s*a+n}else o=u.bottom+n;return[t,o]},_onBBMouseEnter:function(){clearTimeout(this._hideHandle),this._bindBBMouseLeave()},_onBBMouseLeave:function(){clearTimeout(this._hideHandle),this._attachHiddenHandle()},_onClickOutside:function(){this.hide()},_onLinkMouseEnter:function(e){var o,i,n,r=this;this._editMode||(clearTimeout(r._hideHandle),o=e.currentTarget,i=o.getAttribute("href"),this._linkPreview.setAttribute("href",i),this._linkPreview.set("innerHTML",t.Escape.html(i)),r.show(),n=r._getXY(e.pageX,e.pageY,o),r.set("xy",n),o.once("mouseleave",function(){clearTimeout(r._hideHandle),r._attachHiddenHandle()}))},BOUNDING_TEMPLATE:'<div class="alloy-editor-tooltip-link"></div>',TPL_CONTENT:'<div class="link-container"><span class="icon-link-container"><i class="alloy-editor-icon-link"></i></span><a class="link-preview" target="_blank"></a></div>'},{ATTRS:{constrain:{validator:e.isBoolean,value:!0},editor:{validator:t.Lang.isObject},gutter:{validator:e.isObject,value:{left:0,top:0}},hideTimeout:{validator:e.isNumber,value:2e3}}});t.LinkTooltip=o},"",{requires:["dom-screen","escape","event-outside","node-event-delegate","event-mouseenter","widget-base","widget-position","widget-position-constrain","widget-autohide"]}),CKEDITOR.plugins.add("linktooltip",{init:function(t){YUI().use("linktooltip",function(e){var o,i;o=e.merge({editor:t,visible:!1},t.config.linktooltip),i=new e.LinkTooltip(o).render(),t.on("destroy",function(){i.destroy()})})}}))}(),function(){"use strict";var t=Object.prototype.hasOwnProperty;CKEDITOR.plugins.get("uiloader")||CKEDITOR.plugins.add("uiloader",{init:function(t){var e,o=this;e=["node-base"].concat(this._getModules(t)),YUI().use(e,function(e){o._createToolbars(e,t),t.fire("toolbarsReady",{toolbars:t.config.toolbars})})},_createToolbars:function(e,o){var i,n,r;i={editor:o,render:!0,visible:!1},r=o.config.toolbars;for(n in r)t.call(r,n)&&(CKEDITOR.tools.isArray(r[n])?o.config.toolbars[n]=new(e[this._getToolbarName(n)])(e.merge(i,{buttons:r[n]})):r[n]&&(o.config.toolbars[n]=new(e[this._getToolbarName(n)])(e.merge(i,r[n]))))},_getButtonName:function(t){var e=t;return"string"!=typeof t&&(e=t.name),e},_getModules:function(e){var o,i,n,r;n=[],r=e.config.toolbars;for(o in r)if(t.call(r,o))if(n.push("toolbar-"+o),CKEDITOR.tools.isArray(r[o]))for(i=r[o].length-1;i>=0;i--)n.push("button-"+this._getButtonName(r[o][i]));else if(r[o])for(i=r[o].buttons.length-1;i>=0;i--)n.push("button-"+this._getButtonName(r[o].buttons[i]));return n},_getToolbarName:function(t){return"Toolbar"+t.substring(0,1).toUpperCase()+t.substring(1)}})}(),YUI.add("selector-patch",function(t){"use strict";t.mix(t.Selector,{test:function(e,o,i){var n,r,s,a,l,u,c,d,g,b,h=!1,p=!1;if(e&&e.tagName)if("function"==typeof o)h=o.call(e,e);else{for(r=o.split(","),i||t.DOM.inDoc(e)||(s=e.parentNode,s?i=s:(u=e.ownerDocument.createDocumentFragment(),u.appendChild(e),i=u,p=!0)),i=i||e.ownerDocument,c=t.Selector._escapeId(t.DOM.getId(e)),c||(n=!0,c=t.guid(),t.DOM.setId(e,c)),d=0;b=r[d++];){for(b+='[id="'+c+'"]',l=t.Selector.query(b,i),g=0;a=l[g++];)if(a===e){h=!0;break}if(h)break}p&&u.removeChild(e),n&&e.removeAttribute("id")}return h}},!0)},"",{requires:["selector-native"]});